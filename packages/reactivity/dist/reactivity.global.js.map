{
  "version": 3,
  "sources": ["../src/index.ts", "../src/effect.ts", "../../../node_modules/.pnpm/@vue+shared@3.2.37/node_modules/@vue/shared/dist/shared.esm-bundler.js", "../src/baseHandler.ts", "../src/reactive.ts", "../src/computed.ts", "../src/watch.ts", "../src/ref.ts"],
  "sourcesContent": ["export { effect } from './effect'\r\nexport { reactive } from './reactive'\r\nexport { computed } from './computed'\r\nexport { watch } from './watch'\r\nexport * from './ref'", "export let activeEffect\r\n\r\nfunction cleanupEffect(effect) {\r\n  const { deps } = effect // \u88C5\u7684\u662F\u5BF9\u5E94\u7684effect\r\n  // \u591A\u5BF9\u591A\u7684\u5173\u7CFB\uFF0C\u4E24\u8FB9\u90FD\u8981\u5220\u9664\r\n  for (let i = 0; i < deps.length; i++) {\r\n    deps[i].delete(effect) // \u89E3\u9664effect\uFF0C\u91CD\u65B0\u4F9D\u8D56\u6536\u96C6\r\n  }\r\n  effect.deps.length = 0\r\n}\r\n\r\nexport class ReactiveEffect {\r\n  public parent = null\r\n  public deps = []\r\n  public active = true // \u9ED8\u8BA4effect\u662F\u6FC0\u6D3B\u72B6\u6001\r\n  constructor(public fn, public scheduler) {\r\n    // \u5728this\u4E0A\u6DFB\u52A0\u7528\u6237\u4F20\u9012\u7684\u53C2\u6570 \u76F8\u5F53\u4E8Ethis.fn = fn\r\n  }\r\n  run() {\r\n    // \u6267\u884Ceffect\r\n    if (!this.active) {\r\n      // \u8868\u793A\u975E\u6FC0\u6D3B\u72B6\u6001\uFF0C\u53EA\u9700\u8981\u6267\u884C\u51FD\u6570\uFF0C\u4E0D\u7528\u6536\u96C6\u4F9D\u8D56\r\n      this.fn()\r\n    }\r\n    // \u6536\u96C6\u4F9D\u8D56 \u6838\u5FC3\u662F\u5C06\u5F53\u524D\u7684effect\u548C\u4E4B\u540E\u6E32\u67D3\u7684\u5C5E\u6027\u5173\u8054\u5728\u4E00\u8D77\r\n    try {\r\n      this.parent = activeEffect\r\n      activeEffect = this\r\n      // \u8FD9\u91CC\u5728\u6267\u884C\u7528\u6237\u51FD\u6570\u4E4B\u524D\u6E05\u7A7A\u6536\u96C6\u7684\u5185\u5BB9 activeEffect.deps = [ name(Set), age(Set)]\r\n      // \u8FD9\u91CC\u5220\u9664\u6DFB\u52A0\u5220\u9664\u6DFB\u52A0\u9020\u6210\u6B7B\u5FAA\u73AF\uFF0C\u4FEE\u6539\u4E0B\u9762forEach\u4E4B\u524D\u7684\u4EE3\u7801\uFF0C\u8FD0\u884CSet\u540E\u7684effects\r\n      cleanupEffect(this)\r\n      return this.fn() // \u5F53\u7A0D\u540E\u8C03\u7528\u53D6\u503C\u64CD\u4F5C\u7684\u65F6\u5019\uFF0C\u5C31\u53EF\u4EE5\u83B7\u5F97\u8FD9\u4E2A\u5168\u5C40activeEffect\r\n    } finally {\r\n      activeEffect = this.parent\r\n    }\r\n  }\r\n  stop() {\r\n    if (this.active) {\r\n      this.active = false\r\n      cleanupEffect(this) // \u505C\u6B62effect\u6536\u96C6\r\n    }\r\n  }\r\n}\r\n\r\n// fn\u4F1A\u6839\u636E\u72B6\u6001\u53D1\u751F\u53D8\u5316\uFF0C\u91CD\u65B0\u6267\u884C \u53EF\u4EE5\u5D4C\u5957\u7740\u5199\r\nexport function effect(fn, options: any = {}) {\r\n  const _effect = new ReactiveEffect(fn, options.scheduler)\r\n\r\n  _effect.run() // \u9ED8\u8BA4\u5148\u6267\u884C\u4E00\u6B21\r\n\r\n  const runner = _effect.run.bind(_effect) // \u7ED1\u5B9Athis\u6267\u884C\r\n  runner.effect = _effect // \u5C06effect\u6302\u8F7D\u5230runner\u51FD\u6570\u4E0A\r\n  return runner // runner() runner.effect.stop()\r\n}\r\n\r\n// \u591A\u5BF9\u591A \u4E00\u4E2Aeffect\u5BF9\u5E94\u591A\u4E2A\u5C5E\u6027\uFF0C\u4E00\u4E2A\u5C5E\u6027\u5BF9\u5E94\u591A\u4E2Aeffect\r\nconst targetMap = new WeakMap()\r\nexport function track(target, type, key) {\r\n  // \u53EA\u6709\u5728effect\u4E2D\u8C03\u7528\u624D\u6DFB\u52A0\r\n  if (!activeEffect) return\r\n  let depsMap = targetMap.get(target) // \u7B2C\u4E00\u6B21\u6CA1\u6709\r\n  if (!depsMap) {\r\n    targetMap.set(target, (depsMap = new Map()))\r\n  }\r\n  let dep = depsMap.get(key) // key -> name, age\r\n  if (!dep) {\r\n    depsMap.set(key, (dep = new Set()))\r\n  }\r\n  trackEffects(dep)\r\n\r\n  // \u5355\u5411 \u6307\u5C5E\u6027\u8BB0\u5F55effect\uFF0C\u53CD\u5411\u8BB0\u5F55\uFF0Ceffect\u4E5F\u8BB0\u5F55\u4ED6\u88AB\u54EA\u4E9B\u5C5E\u6027\u6536\u96C6\u8FC7\uFF0C\u4E3A\u4E86\u53EF\u4EE5\u6E05\u7406\r\n  // \u5BF9\u8C61 \u67D0\u4E2A\u5C5E\u6027 \u5BF9\u5E94 \u591A\u4E2Aeffect\r\n  // WeakMap = {\u5BF9\u8C61\uFF1AMap{name: Set}}\r\n  // {\u5BF9\u8C61\uFF1A{name\uFF1A[]}}\r\n}\r\nexport function trackEffects(dep) {\r\n  if (activeEffect) {\r\n    let shouldTrack = !dep.has(activeEffect) // \u8FD9\u91CC\u53BB\u91CD\r\n    if (shouldTrack) {\r\n      dep.add(activeEffect)\r\n      // \u8BA9effect\u8BB0\u5F55\u5BF9\u5E94\u7684dep\uFF0C\u7A0D\u540E\u6E05\u7406\u4F1A\u7528\u5230\r\n      // \u5B58\u653E\u7684\u662F\u5C5E\u6027\u5BF9\u5E94\u7684set  name: new Set()\r\n      activeEffect.deps.push(dep)\r\n    }\r\n  }\r\n}\r\n\r\nexport function trigger(target, type, key, value, oldValue) {\r\n  const depsMap = targetMap.get(target)\r\n  if (!depsMap) return // \u89E6\u53D1\u7684\u503C\u4E0D\u5728\u6A21\u677F\u4E2D\r\n  let effects = depsMap.get(key)\r\n  effects && triggerEffects(effects)\r\n}\r\nexport function triggerEffects(effects) {\r\n  effects = new Set(effects)\r\n  effects.forEach(effect => {\r\n    // \u6267\u884Ceffect\u65F6\u53C8\u6267\u884C\u81EA\u5DF1\uFF0C\u9700\u8981\u5C4F\u853D\r\n    if (effect !== activeEffect) {\r\n      // \u5982\u679C\u4F20\u5165\u4E86\u8C03\u7528\u51FD\u6570\uFF0C\u5C31\u7528\u8C03\u7528\u51FD\u6570\r\n      effect.scheduler ? effect.scheduler() : effect.run()\r\n    }\r\n  })\r\n}\r\n\r\n// \u539F\u5148\u7528\u6808\u6765\u89E3\u51B3 \u5148\u8FDB\u540E\u51FA\r\n// [e1, e2]\r\n// effect(() => { // e1\r\n//   state.name // name -> e1\r\n//   effect(() => { // e2\r\n//     state.age // age -> e2\r\n//   })\r\n//   state.address // activeEffect -> e1\r\n// })\r\n\r\n// \u4E4B\u540E\u5229\u7528\u6811\u5F62\u7ED3\u6784 \u7236\u8282\u70B9\r\n// effect(() => { // parent = null activeEffect = e1\r\n//   state.name // name -> e1\r\n//   effect(() => { // parent = e1 activeEffect = e2\r\n//     state.age // age -> e2\r\n//   })\r\n//   state.address // activeEffect -> this.parent\r\n//   effect(() => { // parent = e1 activeEffect = e3\r\n//     state.age // age -> e3\r\n//   })\r\n// })\r\n\r\n// 1.\u5148\u5B9A\u4E49\u54CD\u5E94\u5F0F\u5BF9\u8C61 new Proxy\r\n// 2.effect\u9ED8\u8BA4\u6570\u636E\u53D8\u5316\u80FD\u66F4\u65B0\uFF0C\u5148\u5C06\u5728\u6267\u884C\u7684effect\u4F5C\u4E3A\u5168\u5C40\u53D8\u91CF\u6E32\u67D3\uFF0C\u6E32\u67D3\uFF0C\u5728get\u65B9\u6CD5\u4E2D\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\r\n// 3.WeakMap(\u5BF9\u8C61:map(\u5C5E\u6027:set(effect)))\r\n// 4.\u4E4B\u540E\u53D1\u751F\u6570\u636E\u53D8\u5316\uFF0C\u4F1A\u901A\u8FC7\u5BF9\u8C61\u5C5E\u6027\u67E5\u627E\u5BF9\u5E94\u7684effect\u96C6\u5408\uFF0C\u627E\u5230effect\u5168\u90E8\u6267\u884C\r\n", "/**\r\n * Make a map and return a function for checking if a key\r\n * is in that map.\r\n * IMPORTANT: all calls of this function must be prefixed with\r\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\r\n * So that rollup can tree-shake them if necessary.\r\n */\r\nfunction makeMap(str, expectsLowerCase) {\r\n    const map = Object.create(null);\r\n    const list = str.split(',');\r\n    for (let i = 0; i < list.length; i++) {\r\n        map[list[i]] = true;\r\n    }\r\n    return expectsLowerCase ? val => !!map[val.toLowerCase()] : val => !!map[val];\r\n}\n\n/**\r\n * dev only flag -> name mapping\r\n */\r\nconst PatchFlagNames = {\r\n    [1 /* TEXT */]: `TEXT`,\r\n    [2 /* CLASS */]: `CLASS`,\r\n    [4 /* STYLE */]: `STYLE`,\r\n    [8 /* PROPS */]: `PROPS`,\r\n    [16 /* FULL_PROPS */]: `FULL_PROPS`,\r\n    [32 /* HYDRATE_EVENTS */]: `HYDRATE_EVENTS`,\r\n    [64 /* STABLE_FRAGMENT */]: `STABLE_FRAGMENT`,\r\n    [128 /* KEYED_FRAGMENT */]: `KEYED_FRAGMENT`,\r\n    [256 /* UNKEYED_FRAGMENT */]: `UNKEYED_FRAGMENT`,\r\n    [512 /* NEED_PATCH */]: `NEED_PATCH`,\r\n    [1024 /* DYNAMIC_SLOTS */]: `DYNAMIC_SLOTS`,\r\n    [2048 /* DEV_ROOT_FRAGMENT */]: `DEV_ROOT_FRAGMENT`,\r\n    [-1 /* HOISTED */]: `HOISTED`,\r\n    [-2 /* BAIL */]: `BAIL`\r\n};\n\n/**\r\n * Dev only\r\n */\r\nconst slotFlagsText = {\r\n    [1 /* STABLE */]: 'STABLE',\r\n    [2 /* DYNAMIC */]: 'DYNAMIC',\r\n    [3 /* FORWARDED */]: 'FORWARDED'\r\n};\n\nconst GLOBALS_WHITE_LISTED = 'Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,' +\r\n    'decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,' +\r\n    'Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt';\r\nconst isGloballyWhitelisted = /*#__PURE__*/ makeMap(GLOBALS_WHITE_LISTED);\n\nconst range = 2;\r\nfunction generateCodeFrame(source, start = 0, end = source.length) {\r\n    // Split the content into individual lines but capture the newline sequence\r\n    // that separated each line. This is important because the actual sequence is\r\n    // needed to properly take into account the full line length for offset\r\n    // comparison\r\n    let lines = source.split(/(\\r?\\n)/);\r\n    // Separate the lines and newline sequences into separate arrays for easier referencing\r\n    const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\r\n    lines = lines.filter((_, idx) => idx % 2 === 0);\r\n    let count = 0;\r\n    const res = [];\r\n    for (let i = 0; i < lines.length; i++) {\r\n        count +=\r\n            lines[i].length +\r\n                ((newlineSequences[i] && newlineSequences[i].length) || 0);\r\n        if (count >= start) {\r\n            for (let j = i - range; j <= i + range || end > count; j++) {\r\n                if (j < 0 || j >= lines.length)\r\n                    continue;\r\n                const line = j + 1;\r\n                res.push(`${line}${' '.repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`);\r\n                const lineLength = lines[j].length;\r\n                const newLineSeqLength = (newlineSequences[j] && newlineSequences[j].length) || 0;\r\n                if (j === i) {\r\n                    // push underline\r\n                    const pad = start - (count - (lineLength + newLineSeqLength));\r\n                    const length = Math.max(1, end > count ? lineLength - pad : end - start);\r\n                    res.push(`   |  ` + ' '.repeat(pad) + '^'.repeat(length));\r\n                }\r\n                else if (j > i) {\r\n                    if (end > count) {\r\n                        const length = Math.max(Math.min(end - count, lineLength), 1);\r\n                        res.push(`   |  ` + '^'.repeat(length));\r\n                    }\r\n                    count += lineLength + newLineSeqLength;\r\n                }\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    return res.join('\\n');\r\n}\n\n/**\r\n * On the client we only need to offer special cases for boolean attributes that\r\n * have different names from their corresponding dom properties:\r\n * - itemscope -> N/A\r\n * - allowfullscreen -> allowFullscreen\r\n * - formnovalidate -> formNoValidate\r\n * - ismap -> isMap\r\n * - nomodule -> noModule\r\n * - novalidate -> noValidate\r\n * - readonly -> readOnly\r\n */\r\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\r\nconst isSpecialBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs);\r\n/**\r\n * The full list is needed during SSR to produce the correct initial markup.\r\n */\r\nconst isBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs +\r\n    `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,` +\r\n    `loop,open,required,reversed,scoped,seamless,` +\r\n    `checked,muted,multiple,selected`);\r\n/**\r\n * Boolean attributes should be included if the value is truthy or ''.\r\n * e.g. `<select multiple>` compiles to `{ multiple: '' }`\r\n */\r\nfunction includeBooleanAttr(value) {\r\n    return !!value || value === '';\r\n}\r\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\r\nconst attrValidationCache = {};\r\nfunction isSSRSafeAttrName(name) {\r\n    if (attrValidationCache.hasOwnProperty(name)) {\r\n        return attrValidationCache[name];\r\n    }\r\n    const isUnsafe = unsafeAttrCharRE.test(name);\r\n    if (isUnsafe) {\r\n        console.error(`unsafe attribute name: ${name}`);\r\n    }\r\n    return (attrValidationCache[name] = !isUnsafe);\r\n}\r\nconst propsToAttrMap = {\r\n    acceptCharset: 'accept-charset',\r\n    className: 'class',\r\n    htmlFor: 'for',\r\n    httpEquiv: 'http-equiv'\r\n};\r\n/**\r\n * CSS properties that accept plain numbers\r\n */\r\nconst isNoUnitNumericStyleProp = /*#__PURE__*/ makeMap(`animation-iteration-count,border-image-outset,border-image-slice,` +\r\n    `border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,` +\r\n    `columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,` +\r\n    `grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,` +\r\n    `grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,` +\r\n    `line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,` +\r\n    // SVG\r\n    `fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,` +\r\n    `stroke-miterlimit,stroke-opacity,stroke-width`);\r\n/**\r\n * Known attributes, this is used for stringification of runtime static nodes\r\n * so that we don't stringify bindings that cannot be set from HTML.\r\n * Don't also forget to allow `data-*` and `aria-*`!\r\n * Generated from https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes\r\n */\r\nconst isKnownHtmlAttr = /*#__PURE__*/ makeMap(`accept,accept-charset,accesskey,action,align,allow,alt,async,` +\r\n    `autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,` +\r\n    `border,buffered,capture,challenge,charset,checked,cite,class,code,` +\r\n    `codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,` +\r\n    `coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,` +\r\n    `disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,` +\r\n    `formaction,formenctype,formmethod,formnovalidate,formtarget,headers,` +\r\n    `height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,` +\r\n    `ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,` +\r\n    `manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,` +\r\n    `open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,` +\r\n    `referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,` +\r\n    `selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,` +\r\n    `start,step,style,summary,tabindex,target,title,translate,type,usemap,` +\r\n    `value,width,wrap`);\r\n/**\r\n * Generated from https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute\r\n */\r\nconst isKnownSvgAttr = /*#__PURE__*/ makeMap(`xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,` +\r\n    `arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,` +\r\n    `baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,` +\r\n    `clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,` +\r\n    `color-interpolation-filters,color-profile,color-rendering,` +\r\n    `contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,` +\r\n    `descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,` +\r\n    `dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,` +\r\n    `fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,` +\r\n    `font-family,font-size,font-size-adjust,font-stretch,font-style,` +\r\n    `font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,` +\r\n    `glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,` +\r\n    `gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,` +\r\n    `horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,` +\r\n    `k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,` +\r\n    `lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,` +\r\n    `marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,` +\r\n    `mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,` +\r\n    `name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,` +\r\n    `overflow,overline-position,overline-thickness,panose-1,paint-order,path,` +\r\n    `pathLength,patternContentUnits,patternTransform,patternUnits,ping,` +\r\n    `pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,` +\r\n    `preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,` +\r\n    `rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,` +\r\n    `restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,` +\r\n    `specularConstant,specularExponent,speed,spreadMethod,startOffset,` +\r\n    `stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,` +\r\n    `strikethrough-position,strikethrough-thickness,string,stroke,` +\r\n    `stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,` +\r\n    `stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,` +\r\n    `systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,` +\r\n    `text-decoration,text-rendering,textLength,to,transform,transform-origin,` +\r\n    `type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,` +\r\n    `unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,` +\r\n    `v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,` +\r\n    `vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,` +\r\n    `writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,` +\r\n    `xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,` +\r\n    `xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`);\n\nfunction normalizeStyle(value) {\r\n    if (isArray(value)) {\r\n        const res = {};\r\n        for (let i = 0; i < value.length; i++) {\r\n            const item = value[i];\r\n            const normalized = isString(item)\r\n                ? parseStringStyle(item)\r\n                : normalizeStyle(item);\r\n            if (normalized) {\r\n                for (const key in normalized) {\r\n                    res[key] = normalized[key];\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    else if (isString(value)) {\r\n        return value;\r\n    }\r\n    else if (isObject(value)) {\r\n        return value;\r\n    }\r\n}\r\nconst listDelimiterRE = /;(?![^(]*\\))/g;\r\nconst propertyDelimiterRE = /:(.+)/;\r\nfunction parseStringStyle(cssText) {\r\n    const ret = {};\r\n    cssText.split(listDelimiterRE).forEach(item => {\r\n        if (item) {\r\n            const tmp = item.split(propertyDelimiterRE);\r\n            tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\r\n        }\r\n    });\r\n    return ret;\r\n}\r\nfunction stringifyStyle(styles) {\r\n    let ret = '';\r\n    if (!styles || isString(styles)) {\r\n        return ret;\r\n    }\r\n    for (const key in styles) {\r\n        const value = styles[key];\r\n        const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\r\n        if (isString(value) ||\r\n            (typeof value === 'number' && isNoUnitNumericStyleProp(normalizedKey))) {\r\n            // only render valid values\r\n            ret += `${normalizedKey}:${value};`;\r\n        }\r\n    }\r\n    return ret;\r\n}\r\nfunction normalizeClass(value) {\r\n    let res = '';\r\n    if (isString(value)) {\r\n        res = value;\r\n    }\r\n    else if (isArray(value)) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            const normalized = normalizeClass(value[i]);\r\n            if (normalized) {\r\n                res += normalized + ' ';\r\n            }\r\n        }\r\n    }\r\n    else if (isObject(value)) {\r\n        for (const name in value) {\r\n            if (value[name]) {\r\n                res += name + ' ';\r\n            }\r\n        }\r\n    }\r\n    return res.trim();\r\n}\r\nfunction normalizeProps(props) {\r\n    if (!props)\r\n        return null;\r\n    let { class: klass, style } = props;\r\n    if (klass && !isString(klass)) {\r\n        props.class = normalizeClass(klass);\r\n    }\r\n    if (style) {\r\n        props.style = normalizeStyle(style);\r\n    }\r\n    return props;\r\n}\n\n// These tag configs are shared between compiler-dom and runtime-dom, so they\r\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\r\nconst HTML_TAGS = 'html,body,base,head,link,meta,style,title,address,article,aside,footer,' +\r\n    'header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,' +\r\n    'figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,' +\r\n    'data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,' +\r\n    'time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,' +\r\n    'canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,' +\r\n    'th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,' +\r\n    'option,output,progress,select,textarea,details,dialog,menu,' +\r\n    'summary,template,blockquote,iframe,tfoot';\r\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Element\r\nconst SVG_TAGS = 'svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,' +\r\n    'defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,' +\r\n    'feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,' +\r\n    'feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,' +\r\n    'feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,' +\r\n    'fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,' +\r\n    'foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,' +\r\n    'mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,' +\r\n    'polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,' +\r\n    'text,textPath,title,tspan,unknown,use,view';\r\nconst VOID_TAGS = 'area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr';\r\n/**\r\n * Compiler only.\r\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\r\n */\r\nconst isHTMLTag = /*#__PURE__*/ makeMap(HTML_TAGS);\r\n/**\r\n * Compiler only.\r\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\r\n */\r\nconst isSVGTag = /*#__PURE__*/ makeMap(SVG_TAGS);\r\n/**\r\n * Compiler only.\r\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\r\n */\r\nconst isVoidTag = /*#__PURE__*/ makeMap(VOID_TAGS);\n\nconst escapeRE = /[\"'&<>]/;\r\nfunction escapeHtml(string) {\r\n    const str = '' + string;\r\n    const match = escapeRE.exec(str);\r\n    if (!match) {\r\n        return str;\r\n    }\r\n    let html = '';\r\n    let escaped;\r\n    let index;\r\n    let lastIndex = 0;\r\n    for (index = match.index; index < str.length; index++) {\r\n        switch (str.charCodeAt(index)) {\r\n            case 34: // \"\r\n                escaped = '&quot;';\r\n                break;\r\n            case 38: // &\r\n                escaped = '&amp;';\r\n                break;\r\n            case 39: // '\r\n                escaped = '&#39;';\r\n                break;\r\n            case 60: // <\r\n                escaped = '&lt;';\r\n                break;\r\n            case 62: // >\r\n                escaped = '&gt;';\r\n                break;\r\n            default:\r\n                continue;\r\n        }\r\n        if (lastIndex !== index) {\r\n            html += str.slice(lastIndex, index);\r\n        }\r\n        lastIndex = index + 1;\r\n        html += escaped;\r\n    }\r\n    return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\r\n}\r\n// https://www.w3.org/TR/html52/syntax.html#comments\r\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\r\nfunction escapeHtmlComment(src) {\r\n    return src.replace(commentStripRE, '');\r\n}\n\nfunction looseCompareArrays(a, b) {\r\n    if (a.length !== b.length)\r\n        return false;\r\n    let equal = true;\r\n    for (let i = 0; equal && i < a.length; i++) {\r\n        equal = looseEqual(a[i], b[i]);\r\n    }\r\n    return equal;\r\n}\r\nfunction looseEqual(a, b) {\r\n    if (a === b)\r\n        return true;\r\n    let aValidType = isDate(a);\r\n    let bValidType = isDate(b);\r\n    if (aValidType || bValidType) {\r\n        return aValidType && bValidType ? a.getTime() === b.getTime() : false;\r\n    }\r\n    aValidType = isSymbol(a);\r\n    bValidType = isSymbol(b);\r\n    if (aValidType || bValidType) {\r\n        return a === b;\r\n    }\r\n    aValidType = isArray(a);\r\n    bValidType = isArray(b);\r\n    if (aValidType || bValidType) {\r\n        return aValidType && bValidType ? looseCompareArrays(a, b) : false;\r\n    }\r\n    aValidType = isObject(a);\r\n    bValidType = isObject(b);\r\n    if (aValidType || bValidType) {\r\n        /* istanbul ignore if: this if will probably never be called */\r\n        if (!aValidType || !bValidType) {\r\n            return false;\r\n        }\r\n        const aKeysCount = Object.keys(a).length;\r\n        const bKeysCount = Object.keys(b).length;\r\n        if (aKeysCount !== bKeysCount) {\r\n            return false;\r\n        }\r\n        for (const key in a) {\r\n            const aHasKey = a.hasOwnProperty(key);\r\n            const bHasKey = b.hasOwnProperty(key);\r\n            if ((aHasKey && !bHasKey) ||\r\n                (!aHasKey && bHasKey) ||\r\n                !looseEqual(a[key], b[key])) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return String(a) === String(b);\r\n}\r\nfunction looseIndexOf(arr, val) {\r\n    return arr.findIndex(item => looseEqual(item, val));\r\n}\n\n/**\r\n * For converting {{ interpolation }} values to displayed strings.\r\n * @private\r\n */\r\nconst toDisplayString = (val) => {\r\n    return isString(val)\r\n        ? val\r\n        : val == null\r\n            ? ''\r\n            : isArray(val) ||\r\n                (isObject(val) &&\r\n                    (val.toString === objectToString || !isFunction(val.toString)))\r\n                ? JSON.stringify(val, replacer, 2)\r\n                : String(val);\r\n};\r\nconst replacer = (_key, val) => {\r\n    // can't use isRef here since @vue/shared has no deps\r\n    if (val && val.__v_isRef) {\r\n        return replacer(_key, val.value);\r\n    }\r\n    else if (isMap(val)) {\r\n        return {\r\n            [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val]) => {\r\n                entries[`${key} =>`] = val;\r\n                return entries;\r\n            }, {})\r\n        };\r\n    }\r\n    else if (isSet(val)) {\r\n        return {\r\n            [`Set(${val.size})`]: [...val.values()]\r\n        };\r\n    }\r\n    else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\r\n        return String(val);\r\n    }\r\n    return val;\r\n};\n\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\r\n    ? Object.freeze({})\r\n    : {};\r\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\r\nconst NOOP = () => { };\r\n/**\r\n * Always return false.\r\n */\r\nconst NO = () => false;\r\nconst onRE = /^on[^a-z]/;\r\nconst isOn = (key) => onRE.test(key);\r\nconst isModelListener = (key) => key.startsWith('onUpdate:');\r\nconst extend = Object.assign;\r\nconst remove = (arr, el) => {\r\n    const i = arr.indexOf(el);\r\n    if (i > -1) {\r\n        arr.splice(i, 1);\r\n    }\r\n};\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\r\nconst isArray = Array.isArray;\r\nconst isMap = (val) => toTypeString(val) === '[object Map]';\r\nconst isSet = (val) => toTypeString(val) === '[object Set]';\r\nconst isDate = (val) => toTypeString(val) === '[object Date]';\r\nconst isFunction = (val) => typeof val === 'function';\r\nconst isString = (val) => typeof val === 'string';\r\nconst isSymbol = (val) => typeof val === 'symbol';\r\nconst isObject = (val) => val !== null && typeof val === 'object';\r\nconst isPromise = (val) => {\r\n    return isObject(val) && isFunction(val.then) && isFunction(val.catch);\r\n};\r\nconst objectToString = Object.prototype.toString;\r\nconst toTypeString = (value) => objectToString.call(value);\r\nconst toRawType = (value) => {\r\n    // extract \"RawType\" from strings like \"[object RawType]\"\r\n    return toTypeString(value).slice(8, -1);\r\n};\r\nconst isPlainObject = (val) => toTypeString(val) === '[object Object]';\r\nconst isIntegerKey = (key) => isString(key) &&\r\n    key !== 'NaN' &&\r\n    key[0] !== '-' &&\r\n    '' + parseInt(key, 10) === key;\r\nconst isReservedProp = /*#__PURE__*/ makeMap(\r\n// the leading comma is intentional so empty string \"\" is also included\r\n',key,ref,ref_for,ref_key,' +\r\n    'onVnodeBeforeMount,onVnodeMounted,' +\r\n    'onVnodeBeforeUpdate,onVnodeUpdated,' +\r\n    'onVnodeBeforeUnmount,onVnodeUnmounted');\r\nconst isBuiltInDirective = /*#__PURE__*/ makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo');\r\nconst cacheStringFunction = (fn) => {\r\n    const cache = Object.create(null);\r\n    return ((str) => {\r\n        const hit = cache[str];\r\n        return hit || (cache[str] = fn(str));\r\n    });\r\n};\r\nconst camelizeRE = /-(\\w)/g;\r\n/**\r\n * @private\r\n */\r\nconst camelize = cacheStringFunction((str) => {\r\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\r\n});\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\n/**\r\n * @private\r\n */\r\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, '-$1').toLowerCase());\r\n/**\r\n * @private\r\n */\r\nconst capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));\r\n/**\r\n * @private\r\n */\r\nconst toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);\r\n// compare whether a value has changed, accounting for NaN.\r\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\r\nconst invokeArrayFns = (fns, arg) => {\r\n    for (let i = 0; i < fns.length; i++) {\r\n        fns[i](arg);\r\n    }\r\n};\r\nconst def = (obj, key, value) => {\r\n    Object.defineProperty(obj, key, {\r\n        configurable: true,\r\n        enumerable: false,\r\n        value\r\n    });\r\n};\r\nconst toNumber = (val) => {\r\n    const n = parseFloat(val);\r\n    return isNaN(n) ? val : n;\r\n};\r\nlet _globalThis;\r\nconst getGlobalThis = () => {\r\n    return (_globalThis ||\r\n        (_globalThis =\r\n            typeof globalThis !== 'undefined'\r\n                ? globalThis\r\n                : typeof self !== 'undefined'\r\n                    ? self\r\n                    : typeof window !== 'undefined'\r\n                        ? window\r\n                        : typeof global !== 'undefined'\r\n                            ? global\r\n                            : {}));\r\n};\r\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\r\nfunction genPropsAccessExp(name) {\r\n    return identRE.test(name)\r\n        ? `__props.${name}`\r\n        : `__props[${JSON.stringify(name)}]`;\r\n}\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isModelListener, isNoUnitNumericStyleProp, isObject, isOn, isPlainObject, isPromise, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n", "import { track, trigger } from './effect'\r\nimport { isObject } from '@vue/shared'\r\nimport { reactive } from './reactive'\r\n\r\nexport const enum ReactiveFlags {\r\n  IS_REACTIVE = '__v_isReactive'\r\n}\r\n\r\nexport const mutableHandlers = {\r\n  // \u901A\u8FC7Reflect\u53EF\u4EE5\u76D1\u63A7\u5230\u53D6\u503C\u548C\u8D4B\u503C\r\n  get(target, key, receiver) {\r\n    if (key === ReactiveFlags.IS_REACTIVE) return true\r\n    track(target, 'get', key)\r\n\r\n    // \u5B9E\u73B0\u6DF1\u5EA6\u4EE3\u7406\uFF0C\u6027\u80FD\u597D\uFF0C\u53D6\u503C\u624D\u8FDB\u884C\u4EE3\u7406\r\n    let res = Reflect.get(target, key, receiver)\r\n    if(isObject(res)){\r\n      return reactive(res)\r\n    }\r\n    return res\r\n  },\r\n  set(target, key, value, receiver) {\r\n    // \u4EE3\u7406\u4E0A\u8BBE\u7F6E\u503C\uFF0C\u6267\u884Cset\r\n    let oldValue = target[key]\r\n    let result = Reflect.set(target, key, value, receiver)\r\n    if(oldValue !== value){\r\n      trigger(target, 'set', key, value, oldValue)\r\n    }\r\n    return result\r\n  }\r\n}\r\n", "import { isObject } from '@vue/shared'\r\nimport { mutableHandlers, ReactiveFlags } from './baseHandler'\r\n\r\n// \u5C06\u5BF9\u8C61\u8F6C\u5316\u4E3A\u54CD\u5E94\u5F0F\u7684\uFF0C\u53EA\u80FD\u505A\u5BF9\u8C61\u7684\u4EE3\u7406\r\n// \u5982\u679C\u4F20\u5165\u76F8\u540C\u7684\u5BF9\u8C61\uFF0C\u4F1A\u91CD\u590D\u4EE3\u7406\r\nconst reactiveMap = new WeakMap() // WeakMap key\u53EA\u80FD\u662F\u5BF9\u8C61 \u4E0D\u4F1A\u5BFC\u81F4\u5185\u5B58\u6CC4\u6F0F \u5F31\u5F15\u7528\r\n\r\nexport function isReactive(value){\r\n  return !!(value && value[ReactiveFlags.IS_REACTIVE])\r\n}\r\n\r\n// 1.\u5B9E\u73B0\u540C\u4E00\u4E2A\u5BF9\u8C61\u88AB\u591A\u6B21\u4EE3\u7406\uFF0C\u8FD4\u56DE\u540C\u4E00\u4E2A\u5BF9\u8C61\r\n// 2.\u4EE3\u7406\u5BF9\u8C61\u88AB\u4EE3\u7406\uFF0C\u76F4\u63A5\u8FD4\u56DE\r\nexport function reactive(target) {\r\n  if (!isObject(target)) {\r\n    return\r\n  }\r\n\r\n  // \u4EE3\u7406\u4E00\u4E2A\u5BF9\u8C61 \u6CA1\u6709get\u65B9\u6CD5\u4E0D\u4F1A\u8C03\u7528\uFF0C\u5F80\u4E0B\u521B\u5EFAProxy\uFF0C\u6DFB\u52A0get\u65B9\u6CD5\r\n  // \u4EE3\u7406\u4E00\u4E2A\u4EE3\u7406\u5BF9\u8C61 if\u5224\u65AD\u8BBF\u95EE\u5C5E\u6027\u4F1A\u8C03\u7528get\uFF0C\u76F4\u63A5\u8FD4\u56DEtrue\uFF0C\u56E0\u4E3A\u53EA\u6709\u4EE3\u7406\u5BF9\u8C61\u4F1A\u6709get\r\n  if (target[ReactiveFlags.IS_REACTIVE]) {\r\n    return target\r\n  }\r\n\r\n  let existingProxy = reactiveMap.get(target)\r\n  if (existingProxy) return existingProxy\r\n\r\n  // \u7B2C\u4E00\u6B21\u666E\u901A\u5BF9\u8C61\u4EE3\u7406\uFF0C\u4F1A\u901A\u8FC7new Proxy\u4EE3\u7406\u4E00\u6B21\r\n  // \u7B2C\u4E8C\u6B21\u4F20\u9012Proxy\u5BF9\u8C61\uFF0C\u5148\u5224\u65AD\u662F\u5426\u4EE3\u7406\u8FC7(\u6709\u65E0get\u65B9\u6CD5)\r\n\r\n  // \u5E76\u6CA1\u6709\u91CD\u65B0\u5B9A\u4E49\uFF0C\u53EA\u662F\u4EE3\u7406\r\n  const proxy = new Proxy(target, mutableHandlers)\r\n  reactiveMap.set(target, proxy)\r\n  return proxy\r\n}\r\n\r\n// let target = {\r\n//   name: 'hhh',\r\n//   get getName() {\r\n//     return this.name\r\n//   }\r\n// }\r\n// const proxy = new Proxy(target, {\r\n//   get(target, key, receiver) {\r\n//     console.log(key, receiver) // receiver\u5C31\u662Fproxy \u4F5C\u7528\u662F\u6539\u53D8\u8C03\u7528\u65F6this\u6307\u5411\r\n//     // return target[key] // \u53EA\u80FD\u53D6\u5230getName\u53D6\u4E0D\u5230name \u800C\u4E14\u62A5\u9519 \u8981\u7528Reflect\r\n//     return Reflect.get(target, key, receiver)\r\n//   }\r\n//   // set(target, key, value, receiver) {\r\n//   //   return Reflect.set(target, key, value, receiver)\r\n//   // }\r\n// })\r\n// proxy.getName // \u5728\u9875\u9762\u4E0A\u4F7F\u7528\u4E86getName\u5BF9\u5E94\u7684name\uFF0C\u7A0D\u540Ename\u53D8\u5316\u4E86\uFF0C\u8981\u91CD\u65B0\u6E32\u67D3\r\n", "import { isFunction } from '@vue/shared'\r\nimport { ReactiveEffect, trackEffects, triggerEffects } from './effect'\r\n\r\nclass ComputedRefImpl {\r\n  public effect\r\n  public _dirty = true // \u9ED8\u8BA4\u53D6\u503C\u65F6\u8981\u8BA1\u7B97\r\n  public __v_isReadonly = true\r\n  public __v_isRef = true\r\n  public _value\r\n  public dep = new Set()\r\n  constructor(public getter, public setter) {\r\n    // \u5C06\u7528\u6237\u7684effect\u653E\u5230effect\u4E2D\uFF0CfirstName\u548ClastName\u4F1A\u88ABeffect\u6536\u96C6\r\n    this.effect = new ReactiveEffect(getter, () => {\r\n      // \u4E4B\u540E\u4F9D\u8D56\u7684\u5C5E\u6027\u53D1\u751F\u53D8\u5316\u8C03\u7528\u6B64\u51FD\u6570\r\n      if (!this._dirty) this._dirty = true\r\n      triggerEffects(this.dep)\r\n    })\r\n  }\r\n  get value() {\r\n    // \u8981\u505A\u4F9D\u8D56\u6536\u96C6\uFF0C\u4E0D\u7136\u4E0D\u80FD\u66F4\u65B0\r\n    trackEffects(this.dep)\r\n    if (this._dirty) {\r\n      // \u5982\u679C\u662F\u810F\u7684\uFF0C\u5C31\u518D\u6267\u884C\u539F\u51FD\u6570\r\n      this._dirty = false\r\n      this._value = this.effect.run()\r\n    }\r\n    return this._value\r\n  }\r\n  set value(newValue) {\r\n    this.setter(newValue)\r\n  }\r\n}\r\n\r\nexport function computed(getterOrOptions) {\r\n  let onlyGetter = isFunction(getterOrOptions)\r\n  let getter\r\n  let setter\r\n  if (onlyGetter) {\r\n    getter = getterOrOptions\r\n    setter = () => {\r\n      console.log('no set')\r\n    }\r\n  } else {\r\n    getter = getterOrOptions.get\r\n    setter = getterOrOptions.set\r\n  }\r\n  return new ComputedRefImpl(getter, setter)\r\n}\r\n", "import { isObject, isFunction } from '@vue/shared'\r\nimport { ReactiveEffect } from './effect'\r\nimport { isReactive } from './reactive'\r\n\r\nfunction traversal(value, set = new Set()) {\r\n  // \u9012\u5F52\u8981\u6709\u7EC8\u7ED3\u6761\u4EF6\uFF0C\u4E0D\u662F\u5BF9\u8C61\u7ED3\u675F\r\n  // \u9047\u5230\u5BF9\u8C61\u672C\u8EAB\u4E0D\u5728\u5FAA\u73AF\r\n  if (!isObject(value)) return value\r\n  if (set.has(value)) return value\r\n  set.add(value)\r\n  for (let key in value) {\r\n    traversal(value[key], set)\r\n  }\r\n  return value\r\n}\r\n\r\n// source -> \u4F20\u5165\u7684\u6570\u636E \u5BF9\u8C61\u6216\u8005\u51FD\u6570\r\nexport function watch(source, cb) {\r\n  let getter\r\n  if (isReactive(source)) {\r\n    // \u5BF9\u7528\u6237\u4F20\u5165\u7684\u6570\u636E\u5FAA\u73AF\r\n    // \u9012\u5F52 \u5FAA\u73AF\u4F1A\u8BBF\u95EE\u5C5E\u6027\uFF0C\u8BBF\u95EE\u4F1A\u6536\u96C6effect\r\n    getter = () => traversal(source)\r\n  } else if (isFunction(source)) {\r\n    getter = source\r\n  }\r\n  let cleanup\r\n  const onCleanup = fn => {\r\n    cleanup = fn\r\n  }\r\n  let oldValue\r\n  const job = () => {\r\n    if (cleanup) cleanup() // \u4E0B\u4E00\u6B21watch\u51FA\u53D1\u4E0B\u4E00\u6B21\u7684\u6E05\u7406\r\n    const newValue = effect.run()\r\n    cb(newValue, oldValue, onCleanup)\r\n    oldValue = newValue // \u4FDD\u5B58\u8001\u503C\r\n  }\r\n  const effect = new ReactiveEffect(getter, job)\r\n  oldValue = effect.run()\r\n}\r\n", "import { isObject, isArray } from \"@vue/shared\"\r\nimport { trackEffects, triggerEffects } from \"./effect\"\r\nimport { reactive } from './reactive'\r\n\r\nfunction toReactive(value){\r\n  return isObject(value) ? reactive(value) : value\r\n}\r\n\r\nclass RefImpl{\r\n  public _value\r\n  public dep = new Set()\r\n  public __v_isRef = true\r\n  // rawValue \u672A\u52A0\u5DE5\u8FC7\u7684\u503C\r\n  constructor(public rawValue){\r\n    this._value = toReactive(rawValue)\r\n  }\r\n  get value() {\r\n    trackEffects(this.dep)\r\n    return this._value\r\n  }\r\n  set value(newValue) {\r\n    if(newValue !== this.rawValue){\r\n      this._value = toReactive(newValue)\r\n      this.rawValue = newValue\r\n      triggerEffects(this.dep)\r\n    }\r\n  }\r\n}\r\n\r\nexport function ref(value) {\r\n  return new RefImpl(value)\r\n}\r\n\r\nclass ObjectRefImpl {\r\n  constructor(public object, public key) {}\r\n\r\n  get value() {\r\n    return this.object[this.key]\r\n  }\r\n  set value(newValue) {\r\n    this.object[this.key] = newValue\r\n  }\r\n}\r\n\r\nexport function toRef(object, key) {\r\n  return new ObjectRefImpl(object, key)\r\n}\r\n\r\n// \u7ED9\u6BCF\u4E00\u4E2A\u5BF9\u8C61\u7684\u5C5E\u6027\u90FD\u5305\u88C5\u4E86value\u5C5E\u6027 \u7C7B\u4F3C\u4E8E\u505A\u4EE3\u7406\r\nexport function toRefs(object) {\r\n  const result = isArray(object) ? new Array(object.length) : {}\r\n  for (let key in object) {\r\n    result[key] = toRef(object, key)\r\n  }\r\n  return result\r\n}\r\n\r\nexport function proxyRefs(object) {\r\n  return new Proxy(object, {\r\n    get(target, key, receiver) {\r\n      let r = Reflect.get(target, key, receiver)\r\n      return r.__v_isRef ? r.value : r\r\n    },\r\n    set(target, key, value, receiver) {\r\n      let oldValue = target[key]\r\n      // \u5982\u679C\u662F ref \u5C31\u6539\u5199\u539F\u6765\u503C\u7684 .value \u5C5E\u6027\r\n      if (oldValue.__v_isRef) {\r\n        oldValue.value = value\r\n        return true\r\n      } else {\r\n        return Reflect.set(target, key, value, receiver)\r\n      }\r\n    }\r\n  })\r\n}"],
  "mappings": "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",
  "names": ["effect", "effect"]
}
